/*1315799579,176833976*/

if (window.CavalryLogger) { CavalryLogger.start_js(["\/yQAb"]); }

GroupMall={init:function(a){this._mallNode=$('group_mall_'+a);this._composerPublishToken=Arbiter.subscribe('composer/publish',function(event,b){if(b.streamStory&&!ge(b.streamStory.id))this._addPostToUI(b.streamStory);}.bind(this));onleaveRegister(this._onleave.bind(this));this._navigationBeginToken=Arbiter.subscribe(NavigationMessage.NAVIGATION_BEGIN,this._onleave.bind(this));},_onleave:function(){Arbiter.unsubscribe(this._navigationBeginToken);Arbiter.unsubscribe(this._composerPublishToken);},_addPostToUI:function(c){var a=Vector2.getElementDimensions(this._mallNode).y;DOM.prependContent(this._mallNode,c);var b=this._mallNode.firstChild;LiveTimer.startLoop(0);new animation(b).from('opacity',0).to('opacity',1).duration(300).go();}};
onloadRegister(function(){Event.listen(document.documentElement,'submit',function(b){var a=b.getTarget().getElementsByTagName('*');for(var c=0;c<a.length;c++)if(a[c].getAttribute('required')&&Input.isEmpty(a[c])){a[c].focus();return false;}},Event.Priority.URGENT);});
function startMessagingNavCountUpdater(h){var d;if(window.FutureSideNav){d=FutureSideNav.getInstance().getNodeForKey('inbox');}else d=DOM.scry($('sideNav'),'.key-inbox')[0];if(!d)return;var c=DOM.scry(d,'span.count')[0];var b=DOM.scry(c,'span.countValue')[0];var a=new CounterDisplay('messages_unread',b,c,null,null,true);var f;if(window.FutureSideNav){f=FutureSideNav.getInstance().getNodeForKey('other');}else f=DOM.scry(d,'li.key-other')[0];var g=DOM.scry(f,'span.count')[0];var e=DOM.scry(g,'span.countValue')[0];var i=DOM.scry(g,'span.maxCountIndicator')[0];new CounterMaxDisplay('other_unseen',e,g,null,null,true).setMaxCounter(h,i);}function CounterMaxDisplay(){this._maxValue=null;this._maxIndicatorNode=null;var a=[this].concat($A(arguments));return this.parent.construct.apply(this.parent,a);}Class.extend(CounterMaxDisplay,'CounterDisplay');copy_properties(CounterMaxDisplay.prototype,{setMaxCounter:function(a,b){this._maxValue=a;this._maxIndicatorNode=b;},paint:function(){var b=this._maxValue&&this._count>this._maxValue;var a=b?this._maxValue:this._count;if(this._maxIndicatorNode){DOM.setContent(this._maxIndicatorNode,b?'+':'');}else if(b)a=a+'+';DOM.setContent(this._valueNode,a);this._toggleNodes();}});